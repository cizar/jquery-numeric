/*
 * jQuery UI Numeric Input Extension
 *
 * Version 1.0
 *
 * Copyright (c) 2013 César Kästli (cesarkastli@gmail.com)
 *
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 */
(function(a){a.widget("ui.numeric",{options:{allowDecimals:true,decimalSeparator:".",decimalPlaces:null,allowNegative:true,negativeSign:"-"},_create:function(){a.extend(this.options,{decimalSeparator:this.element.data("numeric-separator"),decimalPlaces:this.element.data("numeric-decimals"),allowNegative:this.element.data("numeric-negative"),negativeSign:this.element.data("numeric-negative-sign")});if(this.options.decimalPlaces==false||this.options.decimalPlaces==0){this.options.allowDecimals=false}else{if(this.options.decimalPlaces==true){this.options.decimalPlaces=null}}this.element.addClass("ui-numeric");this._on(this.element,{keypress:function(c){if(c.ctrlKey||c.charCode==0){return true}var e=a(c.target).val();var d=String.fromCharCode(c.charCode);var g=e.indexOf(this.options.decimalSeparator);var f=e.length-this.selectionEnd();var b=e.split(this.options.decimalSeparator)[1]||"";if(/[0-9]/.test(d)){return g==-1||this.options.decimalPlaces==null||this.selectionStart()<=g||b.length<this.options.decimalPlaces}else{if(this.options.decimalSeparator==d){return this.options.allowDecimals&&(g==-1||this.selectionStart()<=g&&this.selectionEnd()>g)&&this.selectionStart()!=0&&(this.options.decimalPlaces==null||f<=this.options.decimalPlaces)}else{if(this.options.negativeSign==d){return this.options.allowNegative&&(e.indexOf(d)==-1||this.selectionStart()==0&&this.selectionEnd()>0)&&this.selectionStart()==0}}}return false}})},selectionStart:function(){var c=this.element.get(0);if(c.createTextRange){var b=document.selection.createRange().duplicate();b.moveEnd("character",c.value.length);if(b.text==""){return c.value.length}return c.value.lastIndexOf(b.text)}return c.selectionStart},selectionEnd:function(){var c=this.element.get(0);if(c.createTextRange){var b=document.selection.createRange().duplicate();b.moveStart("character",-c.value.length);return b.text.length}return c.selectionEnd},_destroy:function(){},widget:function(){return this.element}})})(jQuery);